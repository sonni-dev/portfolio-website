<!----
 * AURA Portfolio - Adaptive Series Template Modeled after Category  
 * Handles both series overview and focused series views
 * Version: 2.0.0 - Complete adaptive implementation
---->

{% extends "blog/datalogs_base.html" %}
{% load static %}
{% load aura_filters %}
{% load aura_components %}
{% load datalog_tags %}

{% block title %}
{% if series %}{{ series.title }} Series{% else %}Series Overview{% endif %} | DataLogs | AURA
{% endblock %}

{% block meta_description %}
{% if series %}
Browse {{ posts|length }} DataLog entries in {{ series.title }} - {{ series.description|default:"technical insights and development documentation" }}.
{% else %}
Explore all DataLog series
{% endif %}
{% endblock %}

{% block datalogs_title %}
{% if series %}[ SERIES: {{ series.name|upper }} ]{% else %}[ SERIES OVERVIEW ]{% endif %}
{% endblock %}

{% block datalogs_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'blog/css/datalogs-consolidated.css' %}">
<link rel="stylesheet" href="{% static 'blog/css/series.css' %}">
{% endblock %}

{% block datalogs_body_class %}
{% if series %}series-view focused{% else %}series-overview{% endif %}
{% endblock %}

<!-- Breadcrumb -->
{% block datalogs_breadcrumbs %}
<i class="fas fa-chevron-right breadcrumb-separator"></i>
{% if series %}
<a href="{% url 'blog:series_overview' %}" class="breadcrumb-item"><i class="fas fa-layer-group"></i> Series</a>
<i class="fas fa-chevron-right breadcrumb-separator"></i>
<span class="breadcrumb-item active">{{ series.title }}</span>
{% else %}
<span class="breadcrumb-item active">Series Overview</span>
{% endif %}
{% endblock %}

{% block datalogs_content %}

{% if series %}
<!-- ========== FOCUSED SERIES VIEW ========== -->

<!-- Unified Featured Container for Category -->
<section class="series-unified-section">
    <div class="container">
        <div class="datalog-unified-container series-featured {% if series.featured %}featured{% endif %}" 
             data-series="{{ series.slug }}">
            
            <!-- Series Title -->
                <div class="unified-section-header" style="margin-bottom: var(--spacing-lg);">
                    <i class="{{ page_icon }} unified-section-icon"></i>
                    <div>
                        <h1 class="unified-section-title">{{ series.title }}</h1>
                        <p class="unified-section-subtitle">{{ page_subtitle }}</p>
                    </div>
                </div>
                
                <!-- Series Badges -->
                <div style="display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--spacing-md);">
                    <span class="series-badge difficulty-{{ difficulty_level }}">
                        <i class="fas fa-signal"></i>
                        {{ difficulty_display }}
                    </span>
                    {% if is_complete %}
                    <span class="series-status-badge status-complete">
                        <i class="fas fa-check-circle"></i>
                        Complete
                    </span>
                    {% else %}
                    <span class="series-status-badge status-in-progress">
                        <i class="fas fa-spinner"></i>
                        In Progress
                    </span>
                    {% endif %}
                    {% if is_featured %}
                    <span class="series-badge" style="background: rgba(234, 179, 8, 0.2); color: #eab308; border: 1px solid rgba(234, 179, 8, 0.3);">
                        <i class="fas fa-star"></i> Featured
                    </span>
                    {% endif %}
                </div>
            
            <!-- Main Content Grid -->
            <div class="unified-content-grid">
                
                <!-- LEFT SIDE: Category Information -->
                <div class="unified-content-info">
                    
                    {% comment %} <!-- Category Description -->
                    {% if series.description %}
                    <div class="unified-excerpt">
                        <p>{{ series.description }}</p>
                    </div>
                    {% endif %} {% endcomment %}
                    
                    <!-- Category Stats Section -->
                    <div class="category-stats-section">
                        <div class="stats-header unified-section-header" style="color:var(--color-text);">
                            <i class="fas fa-chart-bar"></i>
                            <span>Series Statistics</span>
                        </div>
                        <div class="unified-stats-grid">
                            <div class="unified-stat-item">
                                <i class="fas fa-file-alt"></i>
                                <span>{{ series_post_count }} entr{{ series_post_count|pluralize:"y,ies" }}</span>
                            </div>
                            
                            <div class="unified-stat-item">
                                <i class="fas fa-clock"></i>
                                <span>{{ series_total_reading_time|format_duration }} total reading</span>
                            </div>

                            <div class="unified-stat-item">
                                <i class="fas fa-stopwatch"></i>
                                <span>{{ series_avg_reading_time|format_duration }} avg reading</span>
                            </div>
                            
                            <div class="unified-stat-item">
                                <i class="fas fa-chart-line"></i>
                                <span>{{ progress_percentage|floatformat:0 }}% Progress</span>
                            </div>
                            
                        </div>
                    </div>
                    
                    <!-- Related Categories -->
                    {% if related_series %}
                    <div class="related-categories-section">
                        <div class="related-header unified-section-header" style="color:var(--color-text);">
                            <i class="fas fa-sitemap"></i>
                            <span>Related Series</span>
                        </div>
                        <div class="related-categories-grid">
                            {% for related_ser in related_series %}
                            <div class="related-category-item">
                                <i class="fas fa-alien"></i>
                               
                                <a href="{% url 'blog:series_detail' slug=related_ser.slug %}" class="related-category-item">
                                    {% comment %} {% category_hexagon_single related_cat size="sm" show_label=False %} {% endcomment %}
                                    <span class="related-cat-name">{{ related_ser.title }}</span>
                                    <span class="related-cat-count"> | {{ related_ser.published_post_count }}</span>
                                </a>
                            </div>
                            {% comment %} <br> {% endcomment %}
                            
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Actions Section -->
                    <div class="unified-actions-section">
                        <a href="{% url 'blog:series_overview' %}" class="unified-action-btn">
                            <i class="fas fa-layer-group"></i>
                            All Series
                        </a>
        
                    </div>
                    
                </div>
                
                <!-- RIGHT SIDE: Category Preview Posts -->
                <div class="unified-content-media">
                    {% if posts|slice:":3" %}
                    <div class="category-preview-posts">
                        <div class="preview-header">
                            <i class="fas fa-eye"></i>
                            <span>Recent Entries</span>
                        </div>
                        <div class="preview-posts-list">
                            {% for post in posts|slice:":3" %}
                            <div class="preview-post-item">
                                <a href="{{ post.get_absolute_url }}" class="preview-post-link">
                                    <div class="preview-post-header">
                                        <span class="preview-post-id">{{ post.id|datalog_id }}</span>
                                        <span class="preview-post-date">{{ post.published_date|date:"M d" }}</span>
                                    </div>
                                    <h4 class="preview-post-title">{{ post.title|truncatechars:50 }}</h4>
                                    {% if post.excerpt %}
                                    <p class="preview-post-excerpt">{{ post.excerpt|truncatechars:80 }}</p>
                                    {% endif %}
                                    <div class="preview-post-meta unified-tags-section" style="padding-top:inherit;">
                                        <span class="preview-reading-time">
                                            <i class="fas fa-clock"></i>
                                            {{ post.reading_time|format_duration }}
                                        </span>
                                        {% if post.tags.exists %}
                                        <span class="unified-tags-list">
                                            {% for tag in post.tags.all|slice:":3" %}
                                            <a href="{% url 'blog:tag' slug=tag.slug %}" class="unified-tag">
                                            <i class="fas fa-tag"></i>{{ tag.name }}
                                            </a>
                                            {% endfor %}
                                            {% if post.tags.count > 4 %}
                                            <span class="unified-more-tags">+{{ post.tags.count|add:"-3" }} more</span>
                                            {% endif %}
                                        </span>
                                        {% endif %}
                                    </div>
                                </a>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                </div>
                
            </div>
            
            <!-- Container Footer -->
            <div class="unified-container-footer">
                <div class="unified-footer-stats">
                    <div class="unified-stat-item">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Last updated {{ posts.0.published_date|time_since_published }}</span>
                    </div>
                    <div class="unified-stat-item">
                        <i class="fas fa-tags"></i>
                        <span>{{ category.tags.count|default:0 }} unique tags</span>
                    </div>
                </div>
                
                <div class="unified-footer-actions">
                    {% comment %} <a href="{% url 'blog:category' slug=category.slug %}#subscribe" class="unified-action-btn"><i class="fas fa-bell me-2"></i>Subscribe</a> {% endcomment %}
                    {% comment %} <button class="unified-footer-action-btn" title="Subscribe to Category">
                        <i class="fas fa-bell"></i>
                    </button> {% endcomment %}
                    {% comment %} <button class="unified-footer-action-btn" title="RSS Feed">
                        <i class="fas fa-rss"></i>
                    </button> {% endcomment %}
                    {% comment %} <button class="unified-footer-action-btn" title="Share Category">
                        <i class="fas fa-share-alt"></i>
                    </button> {% endcomment %}
                </div>
            </div>
            
        </div>
    </div>
</section>

<!-- Search & Filters for Category -->
<section class="category-search-section">
    <div class="container">
        {% unified_search_interface query=query style='compact' show_quick_filters=True %}
    </div>
</section>

<!-- Category Posts Grid -->
<section class="category-posts-section">
    <div class="container">
        {% if posts %}
        
        <!-- Grid Header -->
        <div class="category-grid-header unified-section">
            <div class="grid-info">
                <h3 class="grid-title">
                    <i class="fas fa-layer-group' }}"></i>
                    <h2 class="unified-section-title" style="font-size: 1.5rem;">Posts in This Series</h2>
                    <p class="unified-section-subtitle">Follow along in order for the best learning experience</p>
                </h3>
                <div class="grid-stats">
                    <div class="stat-item">
                        <i class="fas fa-file-alt"></i>
                        <span class="grid-count stat-label">{{ posts|length }} {% if series_post_count > posts|length %}of {{ series_post_count }}{% endif %}</span>
                        <span class="stat-text">Total Entries</span>
                    </div>
                    
                    <div class="stat-item">
                        <i class="fas fa-clock"></i>
                        <span class="grid-reading stat-label">{{ series_total_reading_time|format_duration }}</span>
                        <span class="stat-text">Total Reading Time</span>
                    </div>
                    
                </div>
            </div>
            
            <!-- View Controls -->
            <div class="category-view-controls">
                <div class="sort-controls">
                    <select class="hud-select" id="categorySort">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="title">Title A-Z</option>
                        <option value="reading-time">Reading Time</option>
                        <option value="views">Most Viewed</option>
                    </select>
                </div>
                {% comment %} Implement later  {% endcomment %}
                {% comment %} <div class="view-toggle">
                    <button class="view-btn active" data-view="grid" title="Grid View">
                        <i class="fas fa-th"></i>
                    </button>
                    <button class="view-btn" data-view="list" title="List View">
                        <i class="fas fa-list"></i>
                    </button>
                    <button class="view-btn" data-view="timeline" title="Timeline View">
                        <i class="fas fa-stream"></i>
                    </button>
                </div> {% endcomment %}
            </div>
        </div>
        
        <!-- Posts Grid -->
        <div class="category-posts-grid" id="categoryPostsGrid">
            {% for post in posts %}
        <div class="series-post-card">
            
            <!-- Order Badge -->
            <div class="series-order-badge">{{ post.series_order|default:forloop.counter }}</div>
            
            <!-- Post Content -->
            <div style="flex: 1; min-width: 0;">
                <div style="display: flex; align-items: center; gap: var(--spacing-sm); flex-wrap: wrap; margin-bottom: var(--spacing-xs);">
                    <span style="font-size: 0.75rem; font-weight: 600; color: var(--color-lavender); text-transform: uppercase;">
                        Part {{ post.series_order|default:forloop.counter }}
                    </span>
                    {% if post.category %}
                    <span style="color: var(--color-text-tertiary);">•</span>
                    <a href="{% url 'blog:category' slug=post.category.slug %}" style="font-size: 0.75rem; color: var(--color-teal); text-decoration: none;">
                        {{ post.category.name }}
                    </a>
                    {% endif %}
                </div>
                
                <h3 style="margin-bottom: var(--spacing-sm);">
                    <a href="{{ post.get_absolute_url }}" style="color: var(--color-text); text-decoration: none; font-size: 1.1rem; font-weight: 600;">
                        {{ post.title }}
                    </a>
                </h3>
                
                {% if post.excerpt %}
                <p style="font-size: 0.9rem; color: var(--color-text-secondary); line-height: 1.6; margin-bottom: var(--spacing-sm);">
                    {{ post.excerpt|truncatewords:30 }}
                </p>
                {% endif %}
                
                <div style="display: flex; flex-wrap: wrap; gap: var(--spacing-md); font-size: 0.85rem; color: var(--color-text-tertiary);">
                    <span><i class="fas fa-clock"></i> {{ post.reading_time|format_duration }}</span>
                    <span><i class="fas fa-calendar"></i> {{ post.published_date|date:"M d, Y" }}</span>
                    {% if post.tags.all %}
                    <span>
                        <i class="fas fa-tags"></i>
                        {% for tag in post.tags.all|slice:":3" %}
                            {{ tag.name }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </span>
                    {% endif %}
                </div>
            </div>
            
            <!-- Action -->
            <div style="flex-shrink: 0;">
                <a href="{{ post.get_absolute_url }}" class="unified-action-btn" style="white-space: nowrap;">
                    Read Post
                    <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
        {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if is_paginated %}
        <div class="pagination-container">
            {% render_pagination page_obj request %}
        </div>
        {% endif %}
        
        {% else %}
        <!-- No Posts in Category -->
        <div class="glass-card no-posts-panel">
            <div class="no-posts-content">
                <div class="no-posts-icon">
                    {% comment %} {% category_hexagon_single category size="lg" show_label=False link=False %} {% endcomment %}
                </div>
                <h3 class="no-posts-title">No Entries in {{ series.title }}</h3>
                <p class="no-posts-message">
                    There are currently no published entries in the {{ series.title }} series.
                    Check back later for new content, or explore other series.
                </p>
                <div class="no-posts-actions">
                    <a href="{% url 'blog:series_overview' %}" class="glass-btn">
                        <i class="fas fa-th-large"></i>
                        Browse All Series
                    </a>
                    <a href="{% url 'blog:post_list' %}" class="glass-btn primary">
                        <i class="fas fa-list"></i>
                        All DataLog Entries
                    </a>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</section>

<!-- Subscribe widget -->
{% comment %} <section class="category-subscribe-section" id="subscribe">
    <div class="container">
        {% include 'blog/includes/subscribe_widget.html' with context_type='category' context_id=category.id context_name=category.name %}
    </div>
</section> {% endcomment %}

{% else %}
<!-- ========== CATEGORIES OVERVIEW ========== -->

{% comment %} <!-- Search Interface for Categories -->
<section class="categories-search-section">
    <div class="container">
        {% unified_search_interface query=query style='compact' show_quick_filters=False enable_ajax=True placeholder="Search categories and topics..." %}
    </div>
</section> {% endcomment %}

<!-- Main Categories Overview -->
<section class="categories-overview-main">
    <div class="container">
        
        <!-- Overview Header -->
        <div class="overview-header">
            <div class="unified-page-header" style="margin-bottom: var(--spacing-lg);">
                <i class="{{ page_icon }} unified-section-icon"></i>
                <div>
                    <h1 class="unified-section-title">{{ page_title }}</h1>
                    <p class="unified-section-subtitle">{{ page_subtitle }}</p>
                </div>
            </div>
            {% comment %} <div class="overview-title-section">
                <h2 class="overview-title">{{ page_title }}</h2>
                <p class="overview-subtitle">{{ page_subtitle }}</p>
            </div> {% endcomment %}
            
            <!-- Overview Stats -->
            <div class="overview-stats">
                <div class="stat-item">
                    <i class="fas fa-icons"></i>
                    <span class="stat-label">{{ total_series }}</span>
                    <span class="stat-text">Series</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-file-alt"></i>
                    <span class="stat-label">{{ total_posts_in_series|format_number }}</span>
                    <span class="stat-text">Total Entries</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-file-alt"></i>
                    <span class="stat-label">{{ completed_series }}</span>
                    <span class="stat-text">Completed</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-clock"></i>
                    <span class="stat-label">{{ total_reading_time|format_duration }}</span>
                    <span class="stat-text">Reading Time</span>
                </div>
            </div>
        </div>
        
        <!-- Featured Series (if any) -->
         {% if featured_series %}
         
<section class="featured-categories-section">
    <div class="container">
        {% with featured_series as series %}
        <div class="datalog-unified-container series-featured featured" 
             data-series="{{ series.slug }}">
             <div class="unified-featured-badge">
                <i class="fas fa-star"></i>
                <span>Featured</span>
            </div>
            
            <!-- Series Title -->
            <div class="unified-section-header" style="margin-bottom: var(--spacing-lg);">
                <div>
                    <h3 class="unified-section-title">{{ series.title }}</h3>
                    <p class="unified-section-subtitle">{{ series.description }}</p>
                </div>
            </div>
            
            <!-- Series Badges -->
            <div style="display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--spacing-md);">
                <span class="series-badge difficulty-{{ series.difficulty_level }}">
                    <i class="fas fa-signal"></i>
                    {{ series.get_difficulty_level_display }}
                </span>
                {% if series.is_complete %}
                <span class="series-status-badge status-complete">
                    <i class="fas fa-check-circle"></i>
                    Complete
                </span>
                {% else %}
                <span class="series-status-badge status-in-progress">
                    <i class="fas fa-spinner"></i>
                    In Progress
                </span>
                {% endif %}
            </div>
            
            <!-- Main Content Grid -->
            <div class="unified-content-grid">
                
                <!-- LEFT SIDE: Series Information -->
                <div class="unified-content-info">
                    
                    <!-- Series Stats Section -->
                    <div class="category-stats-section">
                        <div class="stats-header unified-section-header" style="color:var(--color-text);">
                            <i class="fas fa-chart-bar"></i>
                            <span>Series Statistics</span>
                        </div>
                        <div class="unified-stats-grid">
                            <div class="unified-stat-item">
                                <i class="fas fa-file-alt"></i>
                                <span>{{ series.posts.count }} entr{{ series.posts.count|pluralize:"y,ies" }}</span>
                            </div>
                            
                            <div class="unified-stat-item">
                                <i class="fas fa-clock"></i>
                                <span>{{ series.total_reading_time|format_duration }} total reading</span>
                            </div>
                            
                            <div class="unified-stat-item">
                                <i class="fas fa-chart-line"></i>
                                <span>{{ series.get_progress_percentage|floatformat:0 }}% Progress</span>
                            </div>
                            
                        </div>
                    </div>
                    
                    <!-- Recent Posts Preview -->
                    <div style="margin-top: var(--spacing-md); padding-top: var(--spacing-md); border-top: 1px solid rgba(255, 255, 255, 0.08);">
                        <div style="font-size: 0.7rem; font-weight: 600; color: var(--color-lavender); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: var(--spacing-xs);">
                            Recent Entries
                        </div>
                        {% for post in featured_details.recent_posts %}
                            <a href="{% url 'blog:post_detail' slug=post.slug %}" class="related-category-item">
                        <div style="font-size: 0.85rem; color: var(--color-text-secondary); margin-bottom: 0.25rem;">
                            • {{ post.title|truncatechars:40 }}
                        </div>
                        {% endfor %}
                    </div>
                    
                    
                    <!-- Actions Section -->
                    <div class="unified-actions-section">
                        <a href="{% url 'blog:series_overview' %}" class="unified-action-btn">
                            <i class="fas fa-layer-group"></i>
                            All Series
                        </a>
        
                    </div>
                    
                </div>

                <!-- RIGHT: Series Thumbnail -->
                <div class="unified-content-media">
                    {% if series.thumbnail %}
                    <img src="{{ series.thumbnail.url }}" alt="{{ series.title }}" style="width: 100%; border-radius: var(--border-radius-lg); border: 1px solid rgba(255, 255, 255, 0.1);">
                    {% else %}
                    <div class="series-thumbnail-placeholder" style="height: 400px;">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    {% endif %}
                </div>
                
            </div>
            
            <!-- Container Footer -->
            <div class="unified-container-footer">
                <div class="unified-footer-stats">
                    <div class="unified-stat-item">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Last updated {{ series.updated_at|time_since_published }}</span>
                    </div>
                    <div class="unified-stat-item">
                        <i class="fas fa-tags"></i>
                        <span>{{ featured_details.series_tags.count|default:0 }} unique tag{{ featured_details.series_tags.count|pluralize }}</span>
                    </div>
                    <div class="unified-stat-item">
                        <i class="fas fa-icons"></i>
                        <span>{{ featured_details.series_categories.count|default:0 }} categor{{ featured_details.series_categories.count|pluralize:"y,ies" }}</span>
                    </div>
                </div>
                
                <div class="unified-footer-actions">
                    {% comment %} <a href="{% url 'blog:category' slug=category.slug %}#subscribe" class="unified-action-btn"><i class="fas fa-bell me-2"></i>Subscribe</a> {% endcomment %}
                    {% comment %} <button class="unified-footer-action-btn" title="Subscribe to Category">
                        <i class="fas fa-bell"></i>
                    </button> {% endcomment %}
                    {% comment %} <button class="unified-footer-action-btn" title="RSS Feed">
                        <i class="fas fa-rss"></i>
                    </button> {% endcomment %}
                    {% comment %} <button class="unified-footer-action-btn" title="Share Category">
                        <i class="fas fa-share-alt"></i>
                    </button> {% endcomment %}
                </div>
            </div>
            
        </div>
    </div>
</section>
{% endwith %}
{% endif %}
        
        <!-- Series Grid -->
    <div class="series-overview-grid">
        {% for series in series_list %}
        <div class="series-card">
            <a href="{% url 'blog:series_detail' slug=series.slug %}" style="text-decoration: none; color: inherit;">
                
                <!-- Thumbnail -->
                {% if series.thumbnail %}
                <img src="{{ series.thumbnail.url }}" alt="{{ series.title }}" class="series-thumbnail">
                {% else %}
                <div class="series-thumbnail-placeholder">
                    <i class="fas fa-layer-group"></i>
                </div>
                {% endif %}
                
                <!-- Series Info -->
                <h3 style="font-size: 1.3rem; font-weight: 700; margin-bottom: var(--spacing-sm); color: var(--color-text);">
                    {{ series.title }}
                </h3>
                
                {% if series.description %}
                <p style="font-size: 0.9rem; color: var(--color-text-secondary); line-height: 1.6; margin-bottom: var(--spacing-md);">
                    {{ series.description|truncatewords:25 }}
                </p>
                {% endif %}
                
                <!-- Badges -->
                <div style="display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--spacing-md);">
                    <span class="series-badge difficulty-{{ series.difficulty_level }}">
                        {{ series.get_difficulty_level_display }}
                    </span>
                    {% if series.is_complete %}
                    <span class="series-status-badge status-complete">
                        <i class="fas fa-check-circle"></i>
                        Complete
                    </span>
                    {% else %}
                    <span class="series-status-badge status-in-progress">
                        <i class="fas fa-spinner"></i>
                        In Progress
                    </span>
                    {% endif %}
                    {% if series.is_featured %}
                    <span class="series-badge" style="background: rgba(234, 179, 8, 0.2); color: #eab308; border: 1px solid rgba(234, 179, 8, 0.3);">
                        <i class="fas fa-star"></i> Featured
                    </span>
                    {% endif %}
                </div>
                
                <!-- Stats -->
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--spacing-sm); text-align: center; padding-top: var(--spacing-md); border-top: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: var(--spacing-sm);">
                    <div>
                        <div style="font-weight: 700; color: var(--color-text); font-size: 1.2rem;">{{ series.actual_post_count }}</div>
                        <div style="font-size: 0.7rem; color: var(--color-text-tertiary); text-transform: uppercase;">Posts</div>
                    </div>
                    <div>
                        <div style="font-weight: 700; color: var(--color-text); font-size: 1.2rem;">{{ series.total_reading_time|format_duration }}</div>
                        <div style="font-size: 0.7rem; color: var(--color-text-tertiary); text-transform: uppercase;">Duration</div>
                    </div>
                    <div>
                        <div style="font-weight: 700; color: var(--color-text); font-size: 1.2rem;">
                            {% if series.is_complete %}100{% else %}{{ series.get_progress_percentage|floatformat:0 }}{% endif %}%
                        </div>
                        <div style="font-size: 0.7rem; color: var(--color-text-tertiary); text-transform: uppercase;">Progress</div>
                    </div>
                </div>
                
                <!-- Progress Bar -->
                <div class="series-progress-bar">
                    <div class="series-progress-fill" style="width: {% if series.is_complete %}100{% else %}{{ series.get_progress_percentage|floatformat:0 }}{% endif %}%;"></div>
                </div>
                
                <!-- Recent Posts Preview -->
                {% if series.recent_posts %}
                <div style="margin-top: var(--spacing-md); padding-top: var(--spacing-md); border-top: 1px solid rgba(255, 255, 255, 0.08);">
                    <div style="font-size: 0.7rem; font-weight: 600; color: var(--color-lavender); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: var(--spacing-xs);">
                        Recent Entries
                    </div>
                    {% for post in series.recent_posts %}
                    <div style="font-size: 0.85rem; color: var(--color-text-secondary); margin-bottom: 0.25rem;">
                        • {{ post.title|truncatechars:40 }}
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </a>
        </div>
        {% endfor %}
    </div>
        
    </div>
</section>

{% endif %}

{% comment %} <!-- Category Stats Section -->
<section class="categories-stats-section">
    <div class="container">
        <div class="glass-card categories-analytics">
            <div class="analytics-header">
                <h3 class="analytics-title">
                    <i class="fas fa-chart-pie"></i>
                    Category Analytics
                </h3>
            </div>
            <div class="analytics-grid">
                <div class="analytics-item">
                    <div class="analytics-number">{{ most_popular_category.post_count|default:0 }}</div>
                    <div class="analytics-label">Most Popular</div>
                    <div class="analytics-detail">{{ most_popular_category.name|default:"N/A" }}</div>
                </div>
                <div class="analytics-item">
                    <div class="analytics-number">{{ newest_category.post_count|default:0 }}</div>
                    <div class="analytics-label">Newest Category</div>
                    <div class="analytics-detail">{{ newest_category.name|default:"N/A" }}</div>
                </div>
                <div class="analytics-item">
                    <div class="analytics-number">{{ total_reading_time|format_duration }}</div>
                    <div class="analytics-label">Total Content</div>
                    <div class="analytics-detail">Reading Time</div>
                </div>
                <div class="analytics-item">
                    <div class="analytics-number">{{ categories_with_recent_posts }}</div>
                    <div class="analytics-label">Active Categories</div>
                    <div class="analytics-detail">This Month</div>
                </div>
            </div>
        </div>
    </div>
</section> {% endcomment %}

{% comment %} {% endif %} {% endcomment %}

{% endblock %}

{% block datalogs_js %}
<script>
// Category page functionality
document.addEventListener('DOMContentLoaded', function() {
    
    // Category/Overview sorting
    const sortSelect = document.getElementById('categorySort') || document.getElementById('categoriesSort');
    if (sortSelect) {
        sortSelect.addEventListener('change', function() {
            // Sort functionality (can be enhanced with AJAX)
            console.log('Sorting by:', this.value);
        });
    }
    
    // View toggle functionality
    const viewButtons = document.querySelectorAll('.view-btn');
    const postsGrid = document.getElementById('categoryPostsGrid');
    
    viewButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Remove active class from all buttons
            viewButtons.forEach(btn => btn.classList.remove('active'));
            // Add active class to clicked button
            this.classList.add('active');
            
            // Update grid view
            const view = this.dataset.view;
            if (postsGrid) {
                postsGrid.className = `category-posts-grid view-${view}`;
            }
        });
    });
    
    // Category card hover effects (for overview)
    const categoryCards = document.querySelectorAll('.category-overview-card');
    categoryCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
    
});
</script>
{% endblock %}